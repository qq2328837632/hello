---
title: linux基础
date: 2023-04-23 14:32:54
tags:
---

# Linux的目录结构

是一个树型结构
Windows系统可以拥有多个盘符,如C盘、D盘、E盘
Linux没有盘符这个概念,只有一个根目录/，所有文件都在它下面

在Linux系统中，路径之间的层级关系，使用:/来表示

在Windows系统中，路径之间的层级关系，使用:\来表示

D:\data\work\hello.txt
注意:
D:表示D盘 ,\表示层级关系

/usr/local/hello.txt
注意:
开头的/表示根目录,后面的/表示层级关系

## ctrl+l清屏

## crtl+c中断

## crtl+d退出或登出

- 可以通过快捷键:ctrl + d,退出账户的登录
- 或者退出某些特定程序的专属页面，比如python

# Linux命令

## Linux命令基础格式

无论是什么命令，用于什么用途，在Linux中，命令有其通用的格式:

command [-options] [parameter]

- command:命令本身
- -options:[可选,非必填]命令的一些**选项**,可以通过选项控制命令的行为细节 
- parameter: [可选，非必填]命令的**参数**，多数用于命令的指向目标等

语法中的[]表示可选的意思

### ls命令的参数的作用

- 可以指定要查看的文件夹(目录)的内容,如果不给定参数,就查看当前工作目录的内容

#### ls命令的选项:

- -a选项,可以展示出隐藏的内容
- 以.开头的文件或文件夹默认被隐藏，需要-a才能显示出来
- -l选项,以列表的形式展示内容，并展示更多细节
- -h选项,需要和-l选项搭配使用，以更加人性化的方式显示文件的大小单位

#### 命令的选项组合使用

- 命令的选项是可以组合使用的,比如: ls -lah,等同于ls -a -l -h

### cd切换工作目录

当Linux终端（命令行）打开的时候，会默认以用户的HOME目录作为当前的工作目录我们可以通过cd命令，更改当前所在的工作目录。
cd命令来自英文:Change Directory
语法: `cd [Linux路径]`

- cd命令无需选项，只有参数，表示要切换到哪个目录下
- cd命令直接执行，不写参数，表示回到用户的HOME目录

### pwd查看当前工作目录

通过ls来验证当前的工作目录，其实是不恰当的。

我们可以通过pwd命令，来查看当前所在的工作目录。

pwd命令来自:Print Work Directory

语法:pwd

-  pwd命令，无选项，无参数，直接输入pwd即可

### 特殊路径符:

- . 表示当前目录，比如cd ./Desktop表示切换到当前目录下的Desktop目录内，和cd Desktop效果一致
- .. 表示上一级目录，比如: cd .. 即可切换到上一级目录，cd ../ ..切换到上二级的目录
- ~ 表示HOME目录，比如:cd~ 即可切换到HOME目录或cd ~/Desktop,切换到HOME内的Desktop目录

### mkdir命令

通过mkdir命令可以创建新的目录（文件夹)

mkdir来自英文:Make Directory
语法:`mkdir [-p] Linux路径`

- 参数必填，表示Linux路径，即要创建的文件夹路径，相对路径或绝对路径均可
- -p选项可选，表示自动创建不存在的父目录，适用于创建连续多层级的目录

注意︰创建文件夹需要修改权限，请确保操作均在HOME目录内，不要在HOME外操作涉及到权限问题，HOME外无法成功

### touch创建文件

可以通过touch命令创建文件

语法: `touch Linux路径`

- touch命令无选项，参数必填，表示要创建的文件路径，相对、绝对、特殊路径符均可以使用

### cat命令查看文件内容

准备好文件内容后，可以通过cat查看内容。

语法:`cat Linux路径`

- cat同样没有选项，只有必填参数，参数表示:被查看的文件路径，相对、绝对,

  特殊路径符都可以使用

### more命令查看文件内容

more命令同样可以查看文件内容，同cat不同的是:. 

- cat是直接将内容全部显示出来
- more支持翻页，如果文件内容过多，可以一页页的展示

语法:`more Linux路径`

- 同样没有选项，只有必填参数，参数表示:被查看的文件路径，相对、绝对、特殊路径符都可以使用

Linux系统内置有一个文件，路径为:/etc/services，可以使用more命令查看
more /etc/services

- 在查看的过程中，通过空格翻页。
- 通过q退出查看

### cp命令复制文件文件夹

cp命令可以用于复制文件/文件夹，cp命令来自英文单词: copy

语法: cp [-r] 参数1参数2

- -r选项，可选，用于复制文件夹使用，表示递归。
- 参数1,Linux路径，表示被复制的文件或文件夹。
- 参数2，Linux路径，表示要复制去的地方

### mv移动文件或文件夹

mv命令可以用于移动文件\文件夹，mv命令来自英文单词:move

语法:`mv参数1参数2`

- 参数1,Linux路径，表示被移动的文件或文件夹
- 参数2，Linux路径，表示要移动去的地方，如果目标不存在，则进行改名，确保目标存在

### rm删除文件、文件夹

rm命令可用于删除文件、文件夹

rm命令来自英文单词:remove

语法: `rm [-r -f] 参数1参数2 ......参数N`

- 同cp命令一样，-r选项用于删除文件夹
- -f表示force，强制删除（不会弹出提示确认信息)
  - 普通用户删除内容不会弹出提示，只有root管理员用户删除内容会有提示
  - 所以一般普通用户用不到-f选项
- 参数1、参数2、…....、参数N表示要删除的文件或文件夹路径，按照空格隔开

rm命令支持通配符 * ，用来做模糊匹配

- 符号 * 表示通配符，即匹配任意内容（包含空)，示例:.
- test*，表示匹配任何以test开头的内容
- *test，表示匹配任何以test结尾的内容 
- *test *，表示匹配任何包含test的内容

- 演示强制删除，-f选项
- 可以通过 su - root，并输入密码123456（和普通用户默认一样）临时切换到root用户体验
- 通过输入exit命令，退回普通用户,也可以回退到root用户。也可以使用ctrl+d

### which命令

我们在前面学习的Linux命令，其实它们的本体就是一个个的二进制可执行程序。和Windows系统中的.exe文件，是一个意思。

我们可以通过which命令，查看所使用的一系列**命令**的程序文件存放在哪里

语法: `which 要查找的命令`

### find命令–按文件名查找文件

同样，在Linux系统中，我们可以通过find命令去搜索指定的文件。

语法:`find 起始路径 -name  "被查找文件名"`

被查找文件名，支持使用通配符*来做模糊查询。

### find命令-按文件大小查找文件

语法: `find 起始路径 -size  +/-n[kMG]`

- +、-表示大于和小于
- n表示大小数字
- kMG表示大小单位，k(小写字母)表示kb，M表示MB，G表示GB

示例:

- 查找小于10KB的文件: find  / -size  -10k
- 查找大于100MB的文件: find / -size +100M
- 查找大于1GB的文件: find / -size +1G

### grep命令-按文件大小查找文件内容

可以通过grep命令，从文件中通过关键字过滤**文件行**。

ps aux | grep 'cupsd' -- 检索进程结果集。 使用 grep 搜索进程，有一条结果是搜索进程本身

`find … | xargs ls -l` 对 find 操作的结果集进行操作 

等价于 `find … -exec ls -l {} \；` 两者差别在于当结果集合很大的时候，xargs 会对结果进行分段处理，所以性能好些 

但 xargs 也有缺陷，xargs 默认用空格来分割结果集，当文件名有空格的时候，会因为文件名被切割 失效

-xargs：将 find 搜索的结果集执行某一指定命令。 当结果集数量过大时，可以分片映射。 `find /usr/ -name '*tmp*' | xargs ls -ld`

解决 xargs 的缺陷，指定切分符号位 null 

-print0： `find /usr/ -name '*tmp*' -print0 | xargs -print0 ls -l` 第一个 print0 指定结果集分隔为 null，第二个 print0 指定 xargs 分隔为 null

语法: `grep [-n] 关键字文件路径`

- 选项-n，可选，表示在结果中显示匹配的行的行号。
- 参数，关键字，必填，表示过滤的关键字，带有空格或其它特殊符号，建议使用” ”将关键字包围起来。
- 参数，文件路径，必填，表示要过滤内容的文件路径，可作为内容输入端口

### wc命令做数量统计

可以通过wc命令统计文件的行数、单词数量等

语法: `wc [-c -m -l -w] 文件路径`

- 选项，-c，统计bytes数量。
- 选项，-m，统计字符数量
- 选项，-l，统计行数
- 选项，-w，统计单词数量
- 参数，文件路径，被统计的文件，可作为内容输入端口

### 管道符

管道符:l
管道符的含义是:将管道符左边命令的结果，作为右边命令的输入

- cat itheima.txt的输出结果（文件内容)。
- 作为右边grep命令的输入（被过滤文件)

`cat itheima.txt | grep itheima`还可以嵌套

### echo命令

可以使用echo命令在命令行内输出指定内容

语法:`echo 输出的内容`

- 无需选项，只有一个参数，表示要输出的内容，复杂内容可以用” ”包围

- 带有空格或\等特殊符号，建议使用双引号包围
- 因为不包围的话，空格后很容易被识别为参数2，尽管echo不受影响，但是要养成习惯哦

### 反引号`

本意是想，输出当前的工作路径，但是pwd被作为普通字符输出了。
我们可以通过将命令用反引号（通常也称之为飘号) ` 将其包围
被   飘号包围的内容，会被作为命令执行，而非普通字符

### 重定向符

```
>,将左侧命令的结果，覆盖写入到符号右侧指定的文件中
>>,将左侧命令的结果，追加写入到符号右侧指定的文件中
```

### tail命令

使用tail命令，可以查看文件尾部内容，跟踪文件的最新更改，

语法如下:`tail [-f -num ] Linux路径`

- 参数，Linux路径，表示被跟踪的文件路径。
- 选项，-f，表示持续跟踪
- 选项，-num，表示，查看尾部多少行，不填默认10行

### vi\vim编辑器介绍

vi\vim是visual interface的简称，是Linux中最经典的文本编辑器

同图形化界面中的文本编辑器一样，vi是命令行下对文本文件进行编辑的绝佳选择

vim是vi的加强版本，兼容vi的所有指令，不仅能编辑文本，而且还具有shell程序编辑的功能，可以不同颜色的字体来辨别语法的正确性，极大方便了程序的设计和编辑性。

#### vi\vim编辑器的三种工作模式

命令模式(Command mode)，最开始状态

- 命令模式下，所敲的按键编辑器都理解为命令，以命令驱动执行不同的功能，此模型下，不能自由进行文本编辑。输入i o a进入输入模式，退出输入**：wq**

输入模式(lnsert mode)

- 也就是所谓的编辑模式、插入模式。此模式下，可以对文件内容进行自由编辑。ESC键进入命令模式

底线命令模式(Last line mode)

- 以**:**开始，通常用于文件的保存、退出。命令以回车结束运行

1. 如果文件路径表示的文件不存在，那么此命令会用于编辑新文件
2. 如果文件路径表示的文件存在，那么此命令用于编辑已有文件

| 模式         | 命令            | 描述                                            |
| ------------ | --------------- | ----------------------------------------------- |
| 命令模式     | i               | 在当前光标位置进入输入模式                      |
| 命令模式     | a               | 在当前光标位置之后进入输入模式                  |
| 命令模式     | I               | 在当前行的开头，进入输入模式                    |
| 命令模式     | A               | 在当前行的结尾，进入输入模式                    |
| 命令模式     | o               | 在当前光标下一行进入输入模式                    |
| 命令模式     | O               | 在当前光标上一行进入输入模式                    |
| 输入模式     | esc             | 任何情况下输入esc都能回到命令模式               |
| 命令模式     | 0               | 移动光标到当前行的开头                          |
| 命令模式     | $               | 移动光标到当前行的结尾                          |
| 命令模式     | pageup( Pgup)   | 向上翻页                                        |
| 命令模式     | pangdown( PgDn) | 向下翻页                                        |
| 命令模式     | /               | 进入搜索模式                                    |
| 命令模式     | n               | 向下继续搜索                                    |
| 命令模式     | N               | 向上继续搜索                                    |
| 命令模式     | dd              | 删除光标所在行的内容                            |
| 命令模式     | ndd             | n是数字，表示删除当前光标向下n行                |
| 命令模式     | yy              | 复制当前行                                      |
| 命令模式     | nyy             | n是数字，复制当前行和下面的n行                  |
| 命令模式     | p               | 粘贴复制的内容                                  |
| 命令模式     | u               | 撤销修改                                        |
| 命令模式     | crtl+r          | 反向撤销修改                                    |
| 命令模式     | gg              | 跳到首行                                        |
| 命令模式     | G               | 跳到行尾                                        |
| 命令模式     | dG              | 从当前行开始，向下全部删除                      |
| 命令模式     | dgg             | 从当前行开始，向上全部删除                      |
| 命令模式     | d$              | 从当前光标开始，删除到本行的结尾                |
| 命令模式     | d0              | 从当前光标开始，删除到本行的开头                |
| 底线命令模式 | :wq             | 保存并退出                                      |
| 底线命令模式 | :q              | 仅退出                                          |
| 底线命令模式 | :q!             | 强制退出                                        |
| 底线命令模式 | :w              | 仅保存                                          |
| 底线命令模式 | :set nu         | 显示行号                                        |
| 底线命令模式 | :set paste      | 设置粘贴模式,主要是为了保证外部复制不会格式错乱 |
|              |                 |                                                 |
|              |                 |                                                 |

分屏，末行模式下 

- :sp 水平分屏
-  :vsp 竖直分屏 
- 分屏命令+filename，分屏并打开这个文件 
- 分屏后屏幕切换，Ctrl-w-w 
- 使用:q 退出光标所在窗口 
- 使用:qall 退出所有窗口

从 vim 中跳转 manpage，命令模式下 

将光标放在待查看单词上，按 K，默认看第一卷 n+K，查看第 n 卷 



查看宏定义：命令模式 

光标放在待查看词上，[+d 即可查看



vim 下使用 shell 命令：末行模式 :! + 命令 操作后，会切换至终端显示结果，按 Enter 后回到 vim 界面

### vim下自动排版命令

在命令行模式下：

1、使用“gg”将光标移动到文档开头

2、使用“v”切换到可视模式

3、再用“G”将光标移动到文档尾部（相当于全选）

4、最后使用“=”，即可完成整个文档的自动排版。

### sudo命令

Su命令

- 可以切换用户，语法:`su [-] [用户名]`
- -表示切换后加载环境变量,建议带上
- 用户可以省略,省略默认切换到root

在我们得知root密码的时候，可以通过su命令切换到root得到最大权限。但是我们不建议长期使用root用户，避免带来系统损坏。

我们可以使用sudo命令，为普通的命令授权,临时以root身份执行。

语法:`sudo 其它命令`

- 在其它命令之前，带上sudo,即可为这一条命令临时赋予root授权
- 但是并不是所有的用户，都有权利使用sudo，我们需要为普通用户配置sudo认证

#### 为普通用户配置sudo认证

- 切换到root用户,执行visudo命令，会自动通过vi编辑器打开:/etc/sudoers。
- 在文件的最后添加:
  `itheima ALL=(ALL)		NOPASSWD: ALL`
  其中最后的NOPASSWD:ALL表示使用sudo命令，无需输入密码，itheima是用户名
- 最后通过wq保存
- 切换回普通用户
  `[itheima@localhost ~]$ sudo ls /root`
- `anaconda-ks.cfg	original-ks.cfg`
- `[itheima@localhost ~]$ sudo mkdir /test`
- `[itheima@localhost ~]$`
- 执行的命令，均以root运行

## 用户、用户组

Linux系统中可以:

- 配置多个用户
- 配置多个用户组
- 用户可以加入多个用户组中

### 用户管理

以下命令需root用户执行。

- 创建用户

  ​	useradd [-g -d]用户名
  ​		选项: -g指定用户的组，不指定-g，会创建同名组并自动加入，指定-g需要组已经存在，如已存在同名组，必须使用-g

  ​		选项:-d指定用户HOME路径，不指定，HOME目录默认在:/home/用户名

- 删除用户

  - ​	userdel [-r]用户名
    ​		选项:-r，删除用户的HOME目录，不使用-r，删除用户时，HOME目录保留

- 查看用户所属组

  - id[用户名]

    ​	参数:用户名，被查看的用户，如果不提供则查看自身。

- 修改用户所属组

  - usermod -aG 用户组 用户名，将指定用户加入指定用户组，一个用户可以在多个用户组。

### getent

使用getent命令，可以查看当前系统中有哪些用户

语法: getent passwd

共有7份信息，分别是:
用户名:密码(x):用户ID:组ID:描述信息(无用):HOME目录:执行终端(默认bash)

使用getent命令,同样可以查看当前系统中有哪些用户组

语法:getent group

包含3份信息,组名称:组认证(显示为x):组ID

## 权限

ls -l后

drwxr-xr-x 2 xiaohuilin xiaohuilin 4096 9月  12  2021 公共的

举例: d rwx r-x r-x，表示:

- 这是一个文件夹，首字母d表示( -表示文件 d表示文件夹 I表示软链接)
- 所属用户（第一个xiaohuilin）对d的权限是:有r有w有x, rwx
- 所属用户组（第二个xiaohuilin）的权限是:有r无w有x, r-x( -表示无此权限)
- 其它用户的权限是：有r无w有x,r-x

rwx代表什么

r表示读权限

w表示写权限

x表示执行权限

针对文件、文件夹的不同，rwx的含义有细微差别

- r ,针对文件可以查看文件内容
  - 针对文件夹，可以查看文件夹内容，如ls命令
- w，针对文件表示可以修改此文件
  - 针对文件夹，可以在文件夹内:创建、删除、改名等操作
- x,针对文件表示可以将文件作为程序执行
  - 针对文件夹，表示可以更改工作目录到此文件夹，即cd进入

## chmod命令

我们可以使用chmod命令，修改文件、文件夹的权限信息。

注意，只有文件、文件夹的所属用户或root用户可以修改。

语法: `chmod [-R] 权限 文件或文件夹`

- 选项:-R，对文件夹内的全部内容应用同样的操作

示例:

- chmod u=rwx,g=rx,o=x hello.txt，将文件权限修改为:rwxr-x--x
  - 其中:u表示user所属用户权限, g表示group组权限,o表示other其它用户权限
- chmod -R u=rwx,g=rx,0=x test,将文件夹test以及文件夹内全部内容权限设置为:rwxr-x--x

除此之外，还有快捷写法: chmod 751 hello.txt
将hello.txt的权限修改为751,r记为4, w记为2,x记为1

## chown命令

使用chown命令，可以修改文件、文件夹的所属用户和用户组
普通用户无法修改所属为其它用户或组，所以此命令只适用于root用户执行

语法: `chown[-R] [用户][:][用户组] 文件或文件夹`

- 选项，-R，同chmod,对文件夹内全部内容应用相同规则
- 选项，用户，修改所属用户
- 选项，用户组,修改所属用户组
-  :用于分隔用户和用户组

示例:

- chown root hello.txt,将hello.txt所属用户修改为root
- chown :root hello.txt,将hello.txt所属用户组修改为root
- chown root:itheima hello.txt,将hello.txt所属用户修改为root,用户组修改为itheima
- chown -R root test,将文件夹test的所属用户修改为root并对文件夹内全部内容应用同样规则

## 历史命令搜索

`history`

- 可以通过:!命令前缀，自动执行上次匹配前缀的命令
- 可以通过快捷键:ctrl + r,输入内容去匹配历史命令

如果搜索到的内容是你需要的，那么∶

- 回车键可以直接执行
- 键盘左右键，可以得到此命令（不执行)

## 光标移动快捷键

- ctrl+ a,跳到命令开头
- ctrl+e,跳到命令结尾
- ctrl＋键盘左键,向左跳一个单词
- ctrl＋键盘右键,向右跳一个单词

## 清屏

- 通过快捷键ctrl+l，可以清空终端内容

- 或通过命令clear得到同样效果

## systemctl命令

Linux系统很多软件(内置或第三方)均支持使用systemctl命令控制:启动、停止、开机自启

能够被systemctl管理的软件，一般也称之为:服务

语法: `systemctl start | stop | status | enable | disable 服务名`

- start启动
- stop关闭
- status查看状态
- enable开启开机自启

- disable关闭开机自启

系统内置的服务比较多，比如:

- NetworkManager,主网络服务

- network,副网络服务
- firewalld，防火墙服务
-  sshd, ssh服务(FinalShell远程登录Linux使用的就是这个服务)

## ln命令创建软连接

在系统中创建软链接,可以将文件、文件夹链接到其它位置。

类似windows系统中的《快捷方式》

语法: `ln -s 参数1参数2`

- -s选项,创建软连接
- 参数1:被链接的文件或文件夹
- 参数2:要链接去的目的地

实例:

- ln -s /etc/yum.conf ~/yum.conf
- ln -s /etc/yum ~/yum

## date命令

通过date命令可以在命令行中查看系统的时间

语法: `date [-d][+格式化字符串]`

- -d按照给定的字符串显示日期，一般用于日期计算

- 格式化字符串:通过特定的字符串标记,来控制显示的日期格式

  - %Y	年

  - %y	年份后两位数字(00..99)

  - %m	月份(01..12)

  - %d	日(01..31)

  - %H	小时(00..23)

  - %M	分钟(00..59)

  - %S	秒(00..60)

  - %s	自1970-01-01	00::00::00 UTC到现在的秒数

## 特殊IP地址

- 127.0.0.1，这个IP地址用于指代本机
- 0.0.0.0,特殊lP地址
  - 可以用于指代本机
  - 可以在端口绑定中用来确定绑定关系（后续讲解)
  - 在一些IP地址限制中，表示所有IP的意思,如放行规则设置为0.0.0.0,表示允许任意IP访问

## 在Linux中修改主机名

- 可以使用命令:hostname查看主机名
- 可以使用命令: hostnamectl set-hostname主机名,修改主机名（需root)

什么是域名解析（主机名映射)

- 可以通过主机名找到对应计算机的IP地址,这就是主机名映射（域名解析)
- 先通过系统本地的记录去查找，如果找不到就联网去公开DNS服务器去查找

## ping命令

可以通过ping命令,检查指定的网络服务器是否是可联通状态

语法: `ping [-c num] ip或主机名`

- 选项:-c，检查的次数，不使用-c选项,将无限次数持续检查
- 参数: ip或主机名，被检查的服务器的ip地址或主机名地址

## wget命令

wget是非交互式的文件下载器,可以在命令行内下载网络文件

语法: `wget [-b] url`

- 选项: -b，可选，后台下载,会将日志写入到当前工作目录的wget-log文件
- 参数: url，下载链接

## curl命令

curl可以发送http网络请求,可用于:下载文件、获取信息等

语法: `curl [-O] url`

- 选项:-O，用于下载文件，当url是下载链接时,可以使用此选项保存文件
- 参数: url，要发起请求的网络地址

## 使用top命令可以:

类似Windows任务售理器·查看CPU、内存、进程的信息

## 使用df命令可以:

查看磁盘使用率

## 使用iostat可以:

查看磁盘速率等信息

## 使用sar -n DEV命令可以:

查看网络情况

## 什么是环境变量

环境变量是一组信息记录,类型是KeyValue型(名称=值)，用于操作系统运行的时候记录关键信息

## 通过env命令可以查看当前系统配置的环境变量信息

## 通过$符号，可以取出环境变量的值

## 什么是PATH，作用是

环境变量PATH会记录一组目录，目录之间用**:**隔开。这里记录的是命令的搜索路径，当执行命令会从记录中记录的目录中挨个搜索要执行的命令并执行。
可以通过修改这个项目的值,加入自定义的命令搜索路径
如`export PATH=$PATH:自定义路径`

## 如何修改环境变量

- 临时生效: export名称=值
- 永久生效:
  - 针对用户:~/bashrc文件中配置
  - 针对全部用户:/etc/profile文件中配置。
  - 配置完成，可以通过source命令立刻生效
